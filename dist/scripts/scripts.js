"use strict";angular.module("homey",["ngAnimate","ui.router","ngStorage","ui.bootstrap.datetimepicker","angularMoment"]).config(["$stateProvider","$urlRouterProvider","$httpProvider","$locationProvider",function(a,b){b.otherwise("/landing"),a.state("landing",{url:"/",templateUrl:"/views/landing.html"}).state("services",{url:"/services",templateUrl:"/views/services.html",controller:"ServiceController",controllerAs:"service"}).state("faq",{url:"/faq",templateUrl:"/views/faq.html",controller:"FaqController",controllerAs:"faq"}).state("contact",{url:"/contact",templateUrl:"/views/contact.html",controller:"ContactController",controllerAs:"contact"}).state("thankyou",{url:"/thankyou",templateUrl:"/views/thankyou.html"}).state("terms",{url:"/terms",templateUrl:"/views/terms.html"}).state("forbidden",{url:"/noAccess",templateUrl:"views/forbidden.html"})}]).run(["$rootScope","$location","$localStorage","$state",function(a){a.$on("$stateChangeSuccess",function(){document.body.scrollTop=document.documentElement.scrollTop=0})}]),angular.module("homey").config(["$stateProvider",function(a){a.state("homeCleaning",{url:"/services/home-cleaning",templateUrl:"/services/views/home-cleaning.html",controller:"HomeCleaningController",controllerAs:"hc"}).state("officeCleaning",{url:"/services/office-cleaning",templateUrl:"/services/views/office-cleaning.html",controller:"OfficeCleaningController",controllerAs:"oc"}).state("carWash",{url:"/services/car-wash",templateUrl:"/services/views/car-wash.html",controller:"CarWashController",controllerAs:"cw"}).state("chef",{url:"/services/personal-chef",templateUrl:"/services/views/personal-chef.html",controller:"ChefController",controllerAs:"chef"}).state("painting",{url:"/services/painting",templateUrl:"/services/views/painting.html"}).state("electric",{url:"/services/electrical",templateUrl:"/services/views/electric.html"}).state("plumbing",{url:"/services/plumbing",templateUrl:"/services/views/plumbing.html"}).state("mechanical",{url:"/services/mechanical",templateUrl:"/services/views/mechanical.html"}).state("contractor",{url:"/services/contractor",templateUrl:"/services/views/contractor.html"}).state("driver",{url:"/services/chauffeur",templateUrl:"/services/views/driver.html",controller:"DriverController",controllerAs:"cf"}).state("security",{url:"/services/security",templateUrl:"/services/views/security.html",controller:"SecurityController",controllerAs:"sc"}).state("gardening",{url:"/services/gardening",templateUrl:"/services/views/gardening.html",controller:"GardeningController",controllerAs:"gd"})}]),angular.module("homey").controller("NavbarController",["$location",function(a){function b(b){return a.path()===b}var c=this;c.isActive=b}]),angular.module("homey").controller("FaqController",[function(){function a(){for(var a=0;a<b.general.length;a++)b.general[a].showAnswer=!1;for(var a=0;a<b.insurance.length;a++)b.insurance[a].showAnswer=!1;for(var a=0;a<b.platform.length;a++)b.platform[a].showAnswer=!1;for(var a=0;a<b.service.length;a++)b.service[a].showAnswer=!1}var b=this;b.insurance=[{q:"What should I do if something is damaged?",a:"Not to worry. All our Homey staff are insured. While damages are not common occurrences, we do understand that mistakes can happen. Homey will take care of any damages that may occur due to any proven negligence from one of our team members."},{q:"What should I do if something is missing?",a:"In the unlikely event that something goes missing, we strongly encourage our users to report the matter to us as soon as possible via our contact page so we can begin our investigations immediately."}],b.service=[{q:"Do cleaners bring supplies? What if I want to use my own supplies?",a:"Donâ€™t worry, we bring everything that we need to get the job done. However, if you have specific supplies that you would rather have us use we encourage you to supply them to our staff upon their arrival."},{q:"When can I expect my professional to arrive?",a:"Unless otherwise notified in advance, your Homey professional will arrive at the time you have stipulated in your booking."},{q:"What are your hours of operation?",a:"All services operate from 6 AM to 9PM (except for Drivers). However, you can make a booking anytime of the day, seven days a week."},{q:"Do I need to be home for my booking?",a:"No you do not need to be home for your booking. As long as you have facilitated everything that is needed for our Homey staff, we will arrive on time, get the job done and leave everything just how you like it. We strongly encourage our users to indicate during the booking whether they will not be home when the Homey team arrives."}],b.general=[{q:"How do our pricing work?",a:"Our pricing is based off an internal calculator that we have built to automatically calculate the workload and time required for a particular job. You can see the calculations when you are booking an appointment."},{q:"How do I file a claim or complaint?",a:"We have a variety of different ways to file complaints. Please feel free to directly contact us via phone (071-421-9246) or via our contact page with whatever complaints you may have. We will work hard to find the resolution as soon as possible."},{q:"What is your cancellation and rescheduling policy?",a:"Currently, we do not give any refunds. If you are unhappy with our work, we will get a new team of professionals to redo the service, to ensure your satisfaction. As far as scheduling, you are free to edit your scheduling so long as you give six hour notice in advance."},{q:"Are Homey professionals insured?",a:"All our Homey professionals are insured in case of any injuries that may occur while at work. In addition to this, in the unlikely event of any loss or damages that may occur to a customer's property as a result of any proven negligence by Homey professionals, the Homey insurance will cover it."},{q:"Are Homey professionals experienced in their field?",a:"Yes all Homey professionals are required to have at least 2-3 years experience in their field."},{q:"Are Homey professionals background checked?",a:"Yes. In order to join the Homey staff, all professionals are required to provide certificates of good conduct from the various CID offices to ensure that they have absolutely no criminal record."}],b.platform=[{q:"Can I book a regularly scheduled Homey service?",a:"Not at this time. But this is a feature we are looking to add soon!"},{q:"What happens after I make a booking?",a:"Once your booking is complete you will get a confirmation email regarding your booking. It will detail what to expect from the Homey team upon arrival. If we have any more inquiries that may be necessary for us to carry out your service, we will follow up your booking with a phone call to go over these details."},{q:"Do you have a mobile app?",a:"Not yet! But it is coming soon. In the meantime, our website is fully optimized for mobile browsers."},{q:"Can I feel comfortable submitting payment through Homey's website?",a:"Yes, we use token authentication to protect our users as well as SSL to securely encrypt all of our requests. We also don't store any credit card information as we use a third party processor such as Stripe."},{q:"How do I edit a booking?",a:"In your appointment dashboard, click the 'edit' button on one of the upcoming appointments you would like to reschedule. Pick the new date of your service and click 'confirm changes'. You may not edit a booking if its service date is less than six hours from now."},{q:"How do I pay?",a:"Currently, we accept cash on site or by debit or credit card. We are working with PesaPal to integrate MPesa."}],a()}]),angular.module("homey").controller("ContactController",["$state","MailerFactory",function(a,b){function c(){b.sendContact(e.form).then(function(){e.form={},a.go("thankyou")},function(a){console.log(a)})}function d(a){switch(a){case"happy":e.form.mood="happy",e.happy=!0,e.ecstatic=!1,e.confused=!1,e.frustrated=!1,e.angry=!1;break;case"ecstatic":e.form.mood="ecstatic",e.happy=!1,e.ecstatic=!0,e.confused=!1,e.frustrated=!1,e.angry=!1;break;case"confused":e.form.mood="confused",e.happy=!1,e.ecstatic=!1,e.confused=!0,e.frustrated=!1,e.angry=!1;break;case"frustrated":e.form.mood="frustrated",e.happy=!1,e.ecstatic=!1,e.confused=!1,e.frustrated=!0,e.angry=!1;break;case"angry":e.form.mood="angry",e.happy=!1,e.ecstatic=!1,e.confused=!1,e.frustrated=!1,e.angry=!0}}var e=this;e.form={},e.happy=!1,e.ecstatic=!1,e.confused=!1,e.frustrated=!1,e.angry=!1,e.check=d,e.sendEmail=c}]),angular.module("homey").controller("ServiceController",[function(){var a=this;a.list=[{title:"Home Cleaning","class":"cleaning",icon:"cleaning-icon.png",state:"homeCleaning"},{title:"Car Wash","class":"carwash",icon:"car-wash.png",state:"carWash"},{title:"Office Cleaning","class":"office",icon:"office-icon.png",state:"officeCleaning"},{title:"Personal Chefs","class":"chefs",icon:"cooking-icon.png",state:"chef"},{title:"Painting","class":"painting",icon:"painting-icon.png",state:"painting"},{title:"Electrical","class":"electric",icon:"electric-icon.png",state:"electric"},{title:"Chauffeur","class":"driver",icon:"driver-icon.png",state:"driver"},{title:"Plumbing","class":"plumbing",icon:"plumbing-icon.png",state:"plumbing"},{title:"Security Guards","class":"security",icon:"security-icon.png",state:"security"},{title:"Gardening","class":"gardening",icon:"gardening-icon.png",state:"gardening"},{title:"Mechanical","class":"mechanical",icon:"mechanical-icon.png",state:"mechanical"},{title:"Contractor Job","class":"contractor",icon:"contractor-icon.png",state:"contractor"}]}]),angular.module("homey").controller("HomeCleaningController",["Neighborhoods",function(a){function b(){return Math.ceil(i.bedrooms/3)}function c(a){i.neighborhood=a,d()}function d(){var a=b();2===i.bedrooms&&2===i.bathrooms&&1===i.kitchens&&1===i.livingrooms?(i.price=1e3,i.price+=350*i.laundry,i.price+=300*i.ironed,i.price+=300*(a-1)):3===i.bedrooms&&3===i.bathrooms&&1===i.kitchens&&1===i.livingrooms?(i.price=1500,i.price+=350*i.laundry,i.price+=300*i.ironed,i.price+=300*(a-1)):(i.price=0,i.price+=400*i.bedrooms,i.price+=400*i.bathrooms,i.price+=300*i.kitchens,i.price+=300*i.livingrooms,i.price+=350*i.laundry,i.price+=300*i.ironed,i.price+=300*(a-1)),("Karen"===i.neighborhood||"Runda"===i.neighborhood||"Eastlands"===i.neighborhood)&&(i.price+=250),h()}function e(a){0===a?(i.bedrooms=2,i.bathrooms=2,i.kitchens=1,i.livingrooms=1):(i.bedrooms=3,i.bathrooms=3,i.kitchens=1,i.livingrooms=1),d()}function f(a){switch(a){case"bedrooms":i.bedrooms++;break;case"bathrooms":i.bathrooms++;break;case"kitchens":i.kitchens++;break;case"livingrooms":i.livingrooms++;break;case"laundry":i.laundry++;break;case"ironed":i.ironed<i.laundry?i.ironed++:i.ironed>i.laundry&&(i.ironed=Number(i.laundry))}d()}function g(a){switch(a){case"bedrooms":i.bedrooms>0&&i.bedrooms--;break;case"bathrooms":i.bathrooms>0&&i.bathrooms--;break;case"kitchens":i.kitchens>0&&i.kitchens--;break;case"livingrooms":i.livingrooms>0&&i.livingrooms--;break;case"laundry":i.laundry>0&&i.laundry--;break;case"ironed":i.ironed>0&&i.ironed--}d()}function h(){i.time=.5*i.bedrooms,i.time+=.5*i.bathrooms,i.time+=i.kitchens,i.time+=.5*i.livingrooms,i.time+=4*i.laundry,i.time+=4*i.ironed}var i=this;i.price=1e3,i.bedrooms=2,i.bathrooms=2,i.kitchens=1,i.livingrooms=1,i.laundry=0,i.ironed=0,i.time=0,i.neighborhood="Neighborhood",i.hoods=a.list,i.addRoom=f,i.removeRoom=g,i.flatRate=e,i.applyTransportFee=c,d()}]),angular.module("homey").controller("OfficeCleaningController",["Neighborhoods",function(a){function b(a){if(0===a&&h.sqft>0)h.sqft-=100;else{if(1!==a)return;h.sqft+=100}e()}function c(a){h.neighborhood=a,e()}function d(){var a;return a=h.sqft>500?Math.ceil((h.sqft-500)/1e3)+1:1}function e(){var a=d();h.price=0,h.price+=2*h.sqft,h.kitchen&&(h.price+=300),h.price+=400*(a-1),("Karen"===h.neighborhood||"Runda"===h.neighborhood||"Eastlands"===h.neighborhood)&&(h.price+=250),f()}function f(){h.time=h.sqft/250}function g(a){h.kitchen=0===a?!1:!0,e()}var h=this;h.sqft=0,h.kitchen=!1,h.price=0,h.time=0,h.neighborhood="Neighborhood",h.hoods=a.list,h.changeFt=b,h.applyTransportFee=c,h.toggleKitchen=g}]),angular.module("homey").controller("CarWashController",["Neighborhoods",function(a){function b(a){g.neighborhood=a,e()}function c(a){if(0===a&&g.number>0)g.number--;else{if(1!==a)return;g.number++}e()}function d(a){g.water=0===a?!1:!0,e()}function e(){g.price=0,g.price+=500*g.number,("Karen"===g.neighborhood||"Runda"===g.neighborhood||"Eastlands"===g.neighborhood)&&(g.price+=250),f()}function f(){g.time=g.number}var g=this;g.number=0,g.water=!0,g.price=0,g.time=0,g.neighborhood="Neighborhood",g.hoods=a.list,g.changeCarQty=c,g.toggleWater=d,g.applyTransportFee=b}]),angular.module("homey").controller("ChefController",["Neighborhoods",function(a){function b(a){if(0===a&&g.number>0)g.number--;else{if(1!==a)return;g.number++}f()}function c(){g.time=8}function d(a){g.neighborhood=a,f()}function e(){var a;return a=g.number>15?Math.ceil((g.number-15)/10)+1:1}function f(){var a=e();g.price=1500,g.price+=1200*(a-1),("Karen"===g.neighborhood||"Runda"===g.neighborhood||"Eastlands"===g.neighborhood)&&(g.price+=250),c()}var g=this;g.number=0,g.price=0,g.time=0,g.neighborhood="Neighborhood",g.hoods=a.list,g.changeServingQty=b,g.applyTransportFee=d}]),angular.module("homey").controller("DriverController",["Neighborhoods",function(a){function b(a){i.neighborhood=a,c()}function c(){i.price=0;for(var a=0;a<i.formData.cars.length;a++){var b=i.formData.cars[a];0===b.day_or_night&&(i.price+=200),b.owned===!1&&(i.price+=0===b.wheel_type?3500:7e3),b.hours&&(i.price+=b.hours>=12?300*(b.hours-12)+1500:300*b.hours)}("Karen"===i.neighborhood||"Runda"===i.neighborhood||"Eastlands"===i.neighborhood)&&(i.price+=250),d()}function d(){i.time=0;for(var a=0;a<i.formData.cars.length;a++)i.formData.cars[a].hours&&(i.time+=+i.formData.cars[a].hours)}function e(a){if(0===a&&i.drivers>0)i.drivers--;else{if(1!==a)return;i.drivers++}}function f(){var a=i.formData.cars.length;!function(a){for(var b=0;b<i.drivers-a;b++)i.formData.cars.push({wheel_type:0,owned:!0,chosenWheelVm:!1,ownedVm:!0,drivingTimeVm:!0})}(a),i.drivers&&(i.ifCars=!0)}function g(a){i.formData.cars.splice(a,1),i.drivers=i.formData.cars.length,0===i.drivers&&(i.ifCars=!1),c()}function h(a,b,d){var e=i.formData.cars[a];switch(b){case"wheel":e.chosenWheelVm=1===d?!0:!1,e.wheel_type=d;break;case"ownership":e.ownedVm=d===!0?!0:!1,e.owned=d;break;case"time":e.drivingTimeVm=1===d?!0:!1,e.day_or_night=d}c()}var i=this;i.drivers=0,i.price=0,i.time=0,i.neighborhood="Neighborhood",i.hoods=a.list,i.ifCars=!1,i.addCars=f,i.removeCar=g,i.changeDriverQty=e,i.formData={cars:[]},i.setType=h,i.applyTransportFee=b}]),angular.module("homey").controller("SecurityController",["Neighborhoods",function(a){function b(a){i.neighborhood=a,c()}function c(){i.price=0;for(var a=0;a<i.formData.guards.length;a++){var b=i.formData.guards[a];0===b.type?(i.price+=1500,b.hours&&(i.price+=1500*(Math.ceil(b.hours/12)-1))):(i.price+=3e3,b.hours&&(i.price+=3e3*(Math.ceil(b.hours/12)-1)))}("Karen"===i.neighborhood||"Runda"===i.neighborhood||"Eastlands"===i.neighborhood)&&(i.price+=250),d()}function d(){i.time=0;for(var a=0;a<i.formData.guards.length;a++)i.formData.guards[a].hours&&(i.time+=+i.formData.guards[a].hours)}function e(a){if(0===a&&i.guards>0)i.guards--;else{if(1!==a)return;i.guards++}}function f(){var a=i.formData.guards.length;!function(a){for(var b=0;b<i.guards-a;b++)i.formData.guards.push({type:0,typeVm:!1})}(a),i.guards&&(i.ifGuards=!0)}function g(a){i.formData.guards.splice(a,1),i.guards=i.formData.guards.length,0===i.guards&&(i.ifGuards=!1),c()}function h(a,b,d){var e=i.formData.guards[a];switch(b){case"guard":e.typeVm=1===d?!0:!1,e.type=d}c()}var i=this;i.guards=0,i.price=0,i.time=0,i.neighborhood="Neighborhood",i.hoods=a.list,i.ifGuards=!1,i.addGuards=f,i.removeGuard=g,i.changeGuardQty=e,i.formData={guards:[]},i.setType=h,i.applyTransportFee=b}]),angular.module("homey").controller("GardeningController",["Neighborhoods",function(a){function b(a){f.neighborhood=a,d()}function c(a){if(0===a&&f.acres>0)f.acres+=.5;else{if(1!==a)return;f.acres+=.5}d()}function d(){f.price=0,f.price+=750*f.acres,("Karen"===f.neighborhood||"Runda"===f.neighborhood||"Eastlands"===f.neighborhood)&&(f.price+=250),f.price=f.price.toFixed(2),e()}function e(){f.time=(4*f.acres).toFixed(1)}var f=this;f.acres=0,f.price=0,f.time=0,f.neighborhood="Neighborhood",f.hoods=a.list,f.changeAcres=c,f.applyTransportFee=b}]),angular.module("homey").factory("MailerFactory",["$http","$q",function(a,b){function c(c){var d=b.defer(),e="https://homey-api.herokuapp.com/api/mailer/contact";return a.post(e,c).success(function(a){d.resolve(a)}).error(function(a){d.reject(a)}),d.promise}return{sendContact:c}}]),angular.module("homey").factory("Neighborhoods",[function(){return{list:[{id:0,name:"Kilimani"},{id:1,name:"Lavington"},{id:2,name:"Westlands"},{id:3,name:"CBD"},{id:4,name:"Upperhill"},{id:5,name:"Karen"},{id:6,name:"Runda"},{id:7,name:"Eastlands"}]}}]),angular.module("homey").directive("navbar",[function(){return{restrict:"E",templateUrl:"views/navbar.html"}}]),angular.module("homey").directive("naviFooter",[function(){return{restrict:"E",templateUrl:"views/footer.html"}}]);