"use strict";angular.module("homey",["ngAnimate","ui.router","ngStorage","ui.bootstrap.datetimepicker","angularMoment"]).config(["$stateProvider","$urlRouterProvider","$httpProvider","$locationProvider",function(a,b,c,d){b.otherwise("/landing"),d.html5Mode(!0),a.state("landing",{url:"/",templateUrl:"/views/landing.html"}).state("services",{url:"/services",templateUrl:"/views/services.html",controller:"ServiceController",controllerAs:"service"}).state("faq",{url:"/faq",templateUrl:"/views/faq.html",controller:"FaqController",controllerAs:"faq"}).state("contact",{url:"/contact",templateUrl:"/views/contact.html",controller:"ContactController",controllerAs:"contact"}).state("thankyou",{url:"/thankyou",templateUrl:"/views/thankyou.html"}).state("terms",{url:"/terms",templateUrl:"/views/terms.html"}).state("forbidden",{url:"/noAccess",templateUrl:"views/forbidden.html"})}]).run(["$rootScope","$location","$localStorage","$state",function(a){a.$on("$stateChangeSuccess",function(){document.body.scrollTop=document.documentElement.scrollTop=0})}]),angular.module("homey").config(["$stateProvider",function(a){a.state("userLogin",{url:"/users/login",templateUrl:"/login/userLogin.html",controller:"UserLoginController",controllerAs:"userAuth"}).state("spLogin",{url:"/service-providers/login",templateUrl:"/login/spLogin.html",controller:"SpLoginController",controllerAs:"spAuth"}).state("userRegister",{url:"/users/register",templateUrl:"/login/userRegister.html",controller:"UserRegisterController",controllerAs:"userAuth"}).state("spRegister",{url:"/service-providers/register",templateUrl:"/login/spRegister.html",controller:"SpRegisterController",controllerAs:"spAuth"}).state("adminLogin",{url:"/admins/login",templateUrl:"/login/adminLogin.html",controller:"AdminLoginController",controllerAs:"adminAuth"})}]),angular.module("homey").config(["$stateProvider",function(a){a.state("bookServices",{url:"/book/services",templateUrl:"/bookings/services.html"}).state("userDashboard",{url:"/dashboard",resolve:{fetchUser:["userFactory","userService","$localStorage",function(a,b,c){return b.user||a.saveUserToService(c.userId).then(function(){return b.user},function(a){console.log(a)})}],fetchAppointments:["apptFactory","apptService","$localStorage",function(a,b,c){return b.appointments||a.saveApptsToService(c.userId).then(function(){return b.appointments},function(a){console.log(a)})}],fetchAddresses:["addressFactory","addressService","$localStorage",function(a,b,c){return b.addresses||a.saveAddressesToService(c.userId).then(function(){return b.addresses},function(a){console.log(a)})}]},templateUrl:"/views/home.html"}).state("userSettings",{url:"/users/settings",templateUrl:"users/settings.html"}).state("profile",{url:"/profile",resolve:{user:["userService",function(a){return a.user}]},templateUrl:"/users/profile.html",controller:"UserController",controllerAs:"user"}).state("edit",{url:"/edit",resolve:{user:["userService",function(a){return a.user}]},templateUrl:"/users/edit.html",controller:"EditController",controllerAs:"edit"})}]),angular.module("homey").config(["$stateProvider",function(a){a.state("appointments",{url:"/appointments",resolve:{appointments:["apptService",function(a){return a.appointments}]},templateUrl:"/appointments/index.html",controller:"AppointmentController",controllerAs:"appt"}).state("newAppointment",{url:"/appointments/new",resolve:{serviceType:function(){return""},addresses:["addressService",function(a){return a.addresses}]},templateUrl:"appointments/new.html",controller:"BookingController",controllerAs:"book"})}]),angular.module("homey").config(["$stateProvider",function(a){a.state("newAppointment.homeCleaning",{url:"/home-cleaning",resolve:{serviceType:function(){return"home-cleanings"},addresses:["addressService",function(a){return a.addresses}]},views:{service:{templateUrl:"bookings/services/home-cleaning.html",controller:"HomeCleaningController",controllerAs:"hc"}}}).state("newAppointment.officeCleaning",{url:"/office-cleaning",resolve:{serviceType:function(){return"office-cleanings"},addresses:["addressService",function(a){return a.addresses}]},views:{service:{templateUrl:"bookings/services/office-cleaning.html",controller:"OfficeCleaningController",controllerAs:"oc"}}}).state("newAppointment.carWash",{url:"/car-wash",resolve:{serviceType:function(){return"car-washes"},addresses:["addressService",function(a){return a.addresses}]},views:{service:{templateUrl:"bookings/services/car-wash.html",controller:"CarWashController",controllerAs:"car"}}}).state("newAppointment.driver",{url:"/driver",resolve:{serviceType:function(){return"drivers"},addresses:["addressService",function(a){return a.addresses}]},views:{service:{templateUrl:"bookings/services/driver.html",controller:"DriverController",controllerAs:"driver"}}}).state("newAppointment.security",{url:"/security",resolve:{serviceType:function(){return"securities"},addresses:["addressService",function(a){return a.addresses}]},views:{service:{templateUrl:"bookings/services/security.html",controller:"SecurityController",controllerAs:"sc"}}}).state("newAppointment.chef",{url:"/chef",resolve:{serviceType:function(){return"chefs"},addresses:["addressService",function(a){return a.addresses}]},views:{service:{templateUrl:"bookings/services/chef.html",controller:"ChefController",controllerAs:"chef"}}}).state("newAppointment.gardening",{url:"/gardening",resolve:{serviceType:function(){return"gardenings"},addresses:["addressService",function(a){return a.addresses}]},views:{service:{templateUrl:"bookings/services/gardening.html",controller:"GardeningController",controllerAs:"gardening"}}}).state("newAppointment.contractor",{url:"/contractor",resolve:{serviceType:function(){return"contractors"},addresses:["addressService",function(a){return a.addresses}]},views:{service:{templateUrl:"bookings/services/contractor.html",controller:"BookingController",controllerAs:"book"}}})}]),angular.module("homey").config(["$stateProvider",function(a){a.state("spDashboard",{url:"/sp/dashboard",resolve:{fetchServiceProvider:["spFactory","spService","$localStorage",function(a,b,c){return b.sp||a.saveSPToService(c.spId).then(function(){return b.sp},function(a){console.log(a)})}]},templateUrl:"/serviceProviders/dashboard.html",controller:"serviceProviderController",controllerAs:"sp"}).state("spSettings",{url:"/homeys/settings",templateUrl:"/serviceProviders/settings.html"}).state("editServiceProvider",{url:"/serviceProvider/edit",templateUrl:"/serviceProviders/edit.html",controller:"serviceProviderEditController",controllerAs:"spEdit"})}]),angular.module("homey").config(["$stateProvider","$httpProvider",function(a){a.state("adminPastDashboard",{url:"/admins/dashboard/past",templateUrl:"/admin/pastDashboard.html"}).state("adminUpcomingDashboard",{url:"/admins/dashboard/upcoming",resolve:{fetchAdmin:["adminFactory","adminService","$localStorage",function(a,b,c){return b.admin||a.saveAdminToService(c.adminId).then(function(){return b.admin},function(a){console.log(a)})}]},templateUrl:"/admin/upcomingDashboard.html"}).state("adminDashboard",{url:"/admins/dashboard/upcoming",resolve:{fetchAdmin:["adminFactory","adminService","$localStorage",function(a,b,c){return b.admin||a.saveAdminToService(c.adminId).then(function(){return b.admin},function(a){console.log(a)})}],providers:["spFactory","spService",function(a,b){return b.providers||a.saveProvidersToService().then(function(){return b.providers},function(a){console.log(a)})}],upcomingAppointments:["adApptFactory","adApptService",function(a,b){return b.upcoming||a.saveUpcomingToService().then(function(){return b.upcoming},function(a){console.log(a)})}],pastAppointments:["adApptFactory","adApptService",function(a,b){return b.past||a.savePastToService().then(function(){return b.past},function(a){console.log(a)})}],unassignedAppointments:["adApptFactory","adApptService",function(a,b){return b.unassigned||a.saveUnassignedToService().then(function(){return b.unassigned},function(a){console.log(a)})}]},templateUrl:"/admin/dashboard.html",controller:"AdminController",controllerAs:"admin"}).state("adminUserDB",{url:"/admins/user-db",templateUrl:"/admin/user-db.html"}).state("adminHomeyDB",{url:"/admins/homey-db",templateUrl:"/admin/homey-db.html"}).state("adminSettings",{url:"/admins/settings",templateUrl:"/admin/settings.html"}).state("adminDiscounts",{url:"/admins/discounts",templateUrl:"/admin/discounts.html"}).state("editAdmin",{url:"/admins/edit",templateUrl:"/admin/edit.html",controller:"AdminEditController",controllerAs:"adminEdit"})}]),angular.module("homey").config(["$stateProvider",function(a){a.state("discounts",{url:"/discounts",templateUrl:"discounts/new.html",controller:"DiscountController",controllerAs:"dc"})}]),angular.module("homey").config(["$stateProvider",function(a){a.state("edit.addresses",{url:"/addresses",resolve:{addresses:["addressService",function(a){return a.addresses}]},views:{addresses:{templateUrl:"addresses/index.html",controller:"AddressController",controllerAs:"address"}}}).state("edit.addresses.new",{url:"/addresses/new",views:{newAddress:{templateUrl:"addresses/new.html",controller:"NewAddressController",controllerAs:"newAddress"}}}).state("newAppointment.homeCleaning.newAddress",{url:"/addresses/new",views:{newAddress:{templateUrl:"addresses/new.html",controller:"NewAddressController",controllerAs:"newAddress"}}}).state("newAppointment.officeCleaning.newAddress",{url:"/addresses/new",views:{newAddress:{templateUrl:"addresses/new.html",controller:"NewAddressController",controllerAs:"newAddress"}}}).state("newAppointment.carWash.newAddress",{url:"/addresses/new",views:{newAddress:{templateUrl:"addresses/new.html",controller:"NewAddressController",controllerAs:"newAddress"}}}).state("newAppointment.driver.newAddress",{url:"/addresses/new",views:{newAddress:{templateUrl:"addresses/new.html",controller:"NewAddressController",controllerAs:"newAddress"}}}).state("newAppointment.security.newAddress",{url:"/addresses/new",views:{newAddress:{templateUrl:"addresses/new.html",controller:"NewAddressController",controllerAs:"newAddress"}}}).state("newAppointment.chef.newAddress",{url:"/addresses/new",views:{newAddress:{templateUrl:"addresses/new.html",controller:"NewAddressController",controllerAs:"newAddress"}}}).state("newAppointment.gardening.newAddress",{url:"/addresses/new",views:{newAddress:{templateUrl:"addresses/new.html",controller:"NewAddressController",controllerAs:"newAddress"}}}).state("newAppointment.contractor.newAddress",{url:"/addresses/new",views:{newAddress:{templateUrl:"addresses/new.html",controller:"NewAddressController",controllerAs:"newAddress"}}})}]),angular.module("homey").config(["$stateProvider",function(a){a.state("payments",{url:"/payments",templateUrl:"/stripe/new.html",controller:"StripeController",controllerAs:"stripe"})}]),angular.module("homey").config(["$stateProvider",function(a){a.state("homeCleaning",{url:"/services/home-cleaning",templateUrl:"/services/views/home-cleaning.html",controller:"HomeCleaningController",controllerAs:"hc"}).state("officeCleaning",{url:"/services/office-cleaning",templateUrl:"/services/views/office-cleaning.html",controller:"OfficeCleaningController",controllerAs:"oc"}).state("carWash",{url:"/services/car-wash",templateUrl:"/services/views/car-wash.html",controller:"CarWashController",controllerAs:"cw"}).state("chef",{url:"/services/personal-chef",templateUrl:"/services/views/personal-chef.html",controller:"ChefController",controllerAs:"chef"}).state("painting",{url:"/services/painting",templateUrl:"/services/views/painting.html"}).state("electric",{url:"/services/electrical",templateUrl:"/services/views/electric.html"}).state("plumbing",{url:"/services/plumbing",templateUrl:"/services/views/plumbing.html"}).state("mechanical",{url:"/services/mechanical",templateUrl:"/services/views/mechanical.html"}).state("contractor",{url:"/services/contractor",templateUrl:"/services/views/contractor.html"}).state("driver",{url:"/services/chauffeur",templateUrl:"/services/views/driver.html",controller:"DriverController",controllerAs:"cf"}).state("security",{url:"/services/security",templateUrl:"/services/views/security.html",controller:"SecurityController",controllerAs:"sc"}).state("gardening",{url:"/services/gardening",templateUrl:"/services/views/gardening.html",controller:"GardeningController",controllerAs:"gd"})}]),angular.module("homey").controller("UserLoginController",["$state","userLoginFactory","fbFactory",function(a,b,c){function d(){b.login(e.userForm).then(function(){e.userForm={},a.go("userDashboard")},function(a){console.log(a)})}c.initialize();var e=this;e.userForm={},e.login=d,e.fbLogin=c.fbLogin}]).controller("UserRegisterController",["$state","userLoginFactory",function(a,b){function c(){b.register(e.userForm).then(function(){e.userForm={},a.go("userDashboard")},function(a){console.log(a)})}function d(a){0===a?(e.userForm.gender=0,e.activeMale=!0,e.activeFemale=!1):(e.userForm.gender=1,e.activeFemale=!0,e.activeMale=!1)}var e=this;e.userForm={},e.activeMale=!1,e.activeFemale=!1,e.register=c,e.check=d}]).controller("SpLoginController",["$state","spLoginFactory",function(a,b){function c(){b.login(d.spForm).then(function(){d.spForm={},a.go("spDashboard")},function(a){console.log(a)})}var d=this;d.spForm={},d.login=c}]).controller("SpRegisterController",["$state","spLoginFactory",function(a,b){function c(){b.register(e.spForm).then(function(){e.spForm={},a.go("spDashboard")},function(a){console.log(a)})}function d(a){0===a?(e.spForm.gender=0,e.activeMale=!0,e.activeFemale=!1):(e.spForm.gender=1,e.activeFemale=!0,e.activeMale=!1)}var e=this;e.spForm={},e.register=c,e.check=d}]).controller("AdminLoginController",["$state","adminLoginFactory",function(a,b){var c=this;c.adminForm={},c.login=function(){b.login(c.adminForm).then(function(){c.adminForm={},a.go("adminUpcomingDashboard")},function(a){console.log(a)})}}]),angular.module("homey").controller("UserController",["$state","user","userService","userFactory","Middleware",function(a,b,c,d,e){e.redirectToForbidden("user");var f=this;f.info=b,f.info.genderType=0===f.info.gender?"Male":"Female",f["delete"]=function(){d.deleteUser().then(function(){a.go("/")},function(a){console.log(a)})}}]).controller("EditController",["$state","user","userService","userFactory","Middleware",function(a,b,c,d,e){e.redirectToForbidden("user");var f=this;f.editForm=b,f.editUser=function(){d.edit(f.editForm).then(function(){f.editForm={},a.go("profile")},function(a){console.log(a)})}}]),angular.module("homey").controller("AppointmentController",["$filter","appointments","apptFactory","userService","Middleware",function(a,b,c,d,e){e.redirectToForbidden("user");var f=this;f.user=d.user,f.appointments=b,console.log(f.appointments),f.upcoming=a("upcomingFilter")(f.appointments),f.past=a("pastFilter")(f.appointments),f.pay=c.pay,f.cancel=c.cancel,f.complete=c.complete}]),angular.module("homey").controller("serviceProviderController",["$state","spService","spFactory","spLoginFactory","Middleware","upcomingAppointments","pastAppointments",function(a,b,c,d,e,f,g){var h=this;h.info=b.sp,h.info.genderType=0===h.info.gender?"Male":"Female",h.upcoming=f,h.past=g,console.log(h.past),h["delete"]=function(){c["delete"]().then(function(){a.go("/")},function(a){console.log(a)})},h.logout=d.logout}]).controller("serviceProviderEditController",["$state","spService","spFactory","Middleware",function(a,b,c,d){d.redirectToForbidden("sp");var e=this;e.editForm=b.sp,e.submitData=function(){c.edit(e.editForm).then(function(){e.editForm={},a.go("spDashboard")},function(a){console.log(a)})}}]),angular.module("homey").controller("AdminController",["$state","adminService","adminFactory","adminLoginFactory","adApptFactory","adApptService","Middleware","upcomingAppointments","pastAppointments","unassignedAppointments","providers",function(a,b,c,d,e,f,g,h,i,j,k){var l=this;l.info=b.admin,l.providers=k,l.upcoming=h,l.past=i,l.unassigned=j,l["delete"]=function(){c["delete"]().then(function(){a.go("/")},function(a){console.log(a)})},l.assign=function(a,b){c.assign(a,b).then(function(){l.upcoming=e.saveUpcomingToService(),l.unassigned=e.saveUnassignedToService()},function(a){console.log(a)})},l.logout=d.logout}]).controller("AdminEditController",["$state","adminService","adminFactory","Middleware",function(a,b,c,d){d.redirectToForbidden("admin");var e=this;e.editForm=b.admin,e.submitData=function(){c.edit(e.editForm).then(function(){e.editForm={},a.go("adminDashboard")},function(a){console.log(a)})}}]),angular.module("homey").controller("DiscountController",["discountFactory","Middleware",function(a,b){function c(){a.generateDiscountCode(d.formData)}b.redirectToForbidden("admin");var d=this;d.submitData=c}]),angular.module("homey").controller("AddressController",["addresses","addressFactory",function(a,b){var c=this;c.destroy=b.destroy,c.formData={},c.all=a}]).controller("NewAddressController",["addressFactory",function(a){var b=this;b.create=a.create}]),angular.module("homey").controller("StripeController",["stripeFactory",function(a){function b(b,c){200==b?a.chargeCustomer(c.id):(console.log("response",c.error.message),console.log("status",b),console.log("failure"))}function c(){Stripe.setPublishableKey("pk_live_n41TBlX0lvSs04xM9Kh983ai"),Stripe.card.createToken(e,b)}var d=this,e=$("#payment-form");d.createStripeToken=c}]),angular.module("homey").controller("NavbarController",["$location",function(a){function b(b){return a.path()===b}var c=this;c.isActive=b}]),angular.module("homey").controller("FaqController",[function(){function a(){for(var a=0;a<b.general.length;a++)b.general[a].showAnswer=!1;for(var a=0;a<b.insurance.length;a++)b.insurance[a].showAnswer=!1;for(var a=0;a<b.platform.length;a++)b.platform[a].showAnswer=!1;for(var a=0;a<b.service.length;a++)b.service[a].showAnswer=!1}var b=this;b.insurance=[{q:"What should I do if something is damaged?",a:"Not to worry. All our Homey staff are insured. While damages are not common occurrences, we do understand that mistakes can happen. Homey will take care of any damages that may occur due to any proven negligence from one of our team members."},{q:"What should I do if something is missing?",a:"In the unlikely event that something goes missing, we strongly encourage our users to report the matter to us as soon as possible via our contact page so we can begin our investigations immediately."}],b.service=[{q:"Do cleaners bring supplies? What if I want to use my own supplies?",a:"Don’t worry, we bring everything that we need to get the job done. However, if you have specific supplies that you would rather have us use we encourage you to supply them to our staff upon their arrival."},{q:"When can I expect my professional to arrive?",a:"Unless otherwise notified in advance, your Homey professional will arrive at the time you have stipulated in your booking."},{q:"What are your hours of operation?",a:"All services operate from 6 AM to 9PM (except for Drivers). However, you can make a booking anytime of the day, seven days a week."},{q:"Do I need to be home for my booking?",a:"No you do not need to be home for your booking. As long as you have facilitated everything that is needed for our Homey staff, we will arrive on time, get the job done and leave everything just how you like it. We strongly encourage our users to indicate during the booking whether they will not be home when the Homey team arrives."}],b.general=[{q:"How do our pricing work?",a:"Our pricing is based off an internal calculator that we have built to automatically calculate the workload and time required for a particular job. You can see the calculations when you are booking an appointment."},{q:"How do I file a claim or complaint?",a:"We have a variety of different ways to file complaints. Please feel free to directly contact us via phone (071-421-9246) or via our contact page with whatever complaints you may have. We will work hard to find the resolution as soon as possible."},{q:"What is your cancellation and rescheduling policy?",a:"Currently, we do not give any refunds. If you are unhappy with our work, we will get a new team of professionals to redo the service, to ensure your satisfaction. As far as scheduling, you are free to edit your scheduling so long as you give six hour notice in advance."},{q:"Are Homey professionals insured?",a:"All our Homey professionals are insured in case of any injuries that may occur while at work. In addition to this, in the unlikely event of any loss or damages that may occur to a customer's property as a result of any proven negligence by Homey professionals, the Homey insurance will cover it."},{q:"Are Homey professionals experienced in their field?",a:"Yes all Homey professionals are required to have at least 2-3 years experience in their field."},{q:"Are Homey professionals background checked?",a:"Yes. In order to join the Homey staff, all professionals are required to provide certificates of good conduct from the various CID offices to ensure that they have absolutely no criminal record."}],b.platform=[{q:"Can I book a regularly scheduled Homey service?",a:"Not at this time. But this is a feature we are looking to add soon!"},{q:"What happens after I make a booking?",a:"Once your booking is complete you will get a confirmation email regarding your booking. It will detail what to expect from the Homey team upon arrival. If we have any more inquiries that may be necessary for us to carry out your service, we will follow up your booking with a phone call to go over these details."},{q:"Do you have a mobile app?",a:"Not yet! But it is coming soon. In the meantime, our website is fully optimized for mobile browsers."},{q:"Can I feel comfortable submitting payment through Homey's website?",a:"Yes, we use token authentication to protect our users as well as SSL to securely encrypt all of our requests. We also don't store any credit card information as we use a third party processor such as Stripe."},{q:"How do I edit a booking?",a:"In your appointment dashboard, click the 'edit' button on one of the upcoming appointments you would like to reschedule. Pick the new date of your service and click 'confirm changes'. You may not edit a booking if its service date is less than six hours from now."},{q:"How do I pay?",a:"Currently, we accept cash on site or by debit or credit card. We are working with PesaPal to integrate MPesa."}],a()}]),angular.module("homey").controller("ContactController",["$state","MailerFactory",function(a,b){function c(){b.sendContact(e.form).then(function(){e.form={},a.go("thankyou")},function(a){console.log(a)})}function d(a){switch(a){case"happy":e.form.mood="happy",e.happy=!0,e.ecstatic=!1,e.confused=!1,e.frustrated=!1,e.angry=!1;break;case"ecstatic":e.form.mood="ecstatic",e.happy=!1,e.ecstatic=!0,e.confused=!1,e.frustrated=!1,e.angry=!1;break;case"confused":e.form.mood="confused",e.happy=!1,e.ecstatic=!1,e.confused=!0,e.frustrated=!1,e.angry=!1;break;case"frustrated":e.form.mood="frustrated",e.happy=!1,e.ecstatic=!1,e.confused=!1,e.frustrated=!0,e.angry=!1;break;case"angry":e.form.mood="angry",e.happy=!1,e.ecstatic=!1,e.confused=!1,e.frustrated=!1,e.angry=!0}}var e=this;e.form={},e.happy=!1,e.ecstatic=!1,e.confused=!1,e.frustrated=!1,e.angry=!1,e.check=d,e.sendEmail=c}]),angular.module("homey").controller("ServiceController",[function(){var a=this;a.list=[{title:"Home Cleaning","class":"cleaning",icon:"cleaning-icon.png",state:"homeCleaning"},{title:"Car Wash","class":"carwash",icon:"car-wash.png",state:"carWash"},{title:"Office Cleaning","class":"office",icon:"office-icon.png",state:"officeCleaning"},{title:"Personal Chefs","class":"chefs",icon:"cooking-icon.png",state:"chef"},{title:"Painting","class":"painting",icon:"painting-icon.png",state:"painting"},{title:"Electrical","class":"electric",icon:"electric-icon.png",state:"electric"},{title:"Chauffeur","class":"driver",icon:"driver-icon.png",state:"driver"},{title:"Plumbing","class":"plumbing",icon:"plumbing-icon.png",state:"plumbing"},{title:"Security Guards","class":"security",icon:"security-icon.png",state:"security"},{title:"Gardening","class":"gardening",icon:"gardening-icon.png",state:"gardening"},{title:"Mechanical","class":"mechanical",icon:"mechanical-icon.png",state:"mechanical"},{title:"Contractor Job","class":"contractor",icon:"contractor-icon.png",state:"contractor"}]}]),angular.module("homey").controller("HomeCleaningController",["Neighborhoods",function(a){function b(){return Math.ceil(i.bedrooms/3)}function c(a){i.neighborhood=a,d()}function d(){var a=b();2===i.bedrooms&&2===i.bathrooms&&1===i.kitchens&&1===i.livingrooms?(i.price=1e3,i.price+=350*i.laundry,i.price+=300*i.ironed,i.price+=300*(a-1)):3===i.bedrooms&&3===i.bathrooms&&1===i.kitchens&&1===i.livingrooms?(i.price=1500,i.price+=350*i.laundry,i.price+=300*i.ironed,i.price+=300*(a-1)):(i.price=0,i.price+=400*i.bedrooms,i.price+=400*i.bathrooms,i.price+=300*i.kitchens,i.price+=300*i.livingrooms,i.price+=350*i.laundry,i.price+=300*i.ironed,i.price+=300*(a-1)),("Karen"===i.neighborhood||"Runda"===i.neighborhood||"Eastlands"===i.neighborhood)&&(i.price+=250),h()}function e(a){0===a?(i.bedrooms=2,i.bathrooms=2,i.kitchens=1,i.livingrooms=1):(i.bedrooms=3,i.bathrooms=3,i.kitchens=1,i.livingrooms=1),d()}function f(a){switch(a){case"bedrooms":i.bedrooms++;break;case"bathrooms":i.bathrooms++;break;case"kitchens":i.kitchens++;break;case"livingrooms":i.livingrooms++;break;case"laundry":i.laundry++;break;case"ironed":i.ironed<i.laundry?i.ironed++:i.ironed>i.laundry&&(i.ironed=Number(i.laundry))}d()}function g(a){switch(a){case"bedrooms":i.bedrooms>0&&i.bedrooms--;break;case"bathrooms":i.bathrooms>0&&i.bathrooms--;break;case"kitchens":i.kitchens>0&&i.kitchens--;break;case"livingrooms":i.livingrooms>0&&i.livingrooms--;break;case"laundry":i.laundry>0&&i.laundry--;break;case"ironed":i.ironed>0&&i.ironed--}d()}function h(){i.time=.5*i.bedrooms,i.time+=.5*i.bathrooms,i.time+=i.kitchens,i.time+=.5*i.livingrooms,i.time+=4*i.laundry,i.time+=4*i.ironed}var i=this;i.price=1e3,i.bedrooms=2,i.bathrooms=2,i.kitchens=1,i.livingrooms=1,i.laundry=0,i.ironed=0,i.time=0,i.neighborhood="Neighborhood",i.hoods=a.list,i.addRoom=f,i.removeRoom=g,i.flatRate=e,i.applyTransportFee=c,d()}]),angular.module("homey").controller("OfficeCleaningController",["Neighborhoods",function(a){function b(a){if(0===a&&h.sqft>0)h.sqft-=100;else{if(1!==a)return;h.sqft+=100}e()}function c(a){h.neighborhood=a,e()}function d(){var a;return a=h.sqft>500?Math.ceil((h.sqft-500)/1e3)+1:1}function e(){var a=d();h.price=0,h.price+=2*h.sqft,h.kitchen&&(h.price+=300),h.price+=400*(a-1),("Karen"===h.neighborhood||"Runda"===h.neighborhood||"Eastlands"===h.neighborhood)&&(h.price+=250),f()}function f(){h.time=h.sqft/250}function g(a){h.kitchen=0===a?!1:!0,e()}var h=this;h.sqft=0,h.kitchen=!1,h.price=0,h.time=0,h.neighborhood="Neighborhood",h.hoods=a.list,h.changeFt=b,h.applyTransportFee=c,h.toggleKitchen=g}]),angular.module("homey").controller("CarWashController",["Neighborhoods",function(a){function b(a){g.neighborhood=a,e()}function c(a){if(0===a&&g.number>0)g.number--;else{if(1!==a)return;g.number++}e()}function d(a){g.water=0===a?!1:!0,e()}function e(){g.price=0,g.price+=500*g.number,("Karen"===g.neighborhood||"Runda"===g.neighborhood||"Eastlands"===g.neighborhood)&&(g.price+=250),f()}function f(){g.time=g.number}var g=this;g.number=0,g.water=!0,g.price=0,g.time=0,g.neighborhood="Neighborhood",g.hoods=a.list,g.changeCarQty=c,g.toggleWater=d,g.applyTransportFee=b}]),angular.module("homey").controller("ChefController",["Neighborhoods",function(a){function b(a){if(0===a&&g.number>0)g.number--;else{if(1!==a)return;g.number++}f()}function c(){g.time=8}function d(a){g.neighborhood=a,f()}function e(){var a;return a=g.number>15?Math.ceil((g.number-15)/10)+1:1}function f(){var a=e();g.price=1500,g.price+=1200*(a-1),("Karen"===g.neighborhood||"Runda"===g.neighborhood||"Eastlands"===g.neighborhood)&&(g.price+=250),c()}var g=this;g.number=0,g.price=0,g.time=0,g.neighborhood="Neighborhood",g.hoods=a.list,g.changeServingQty=b,g.applyTransportFee=d}]),angular.module("homey").controller("DriverController",["Neighborhoods",function(a){function b(a){i.neighborhood=a,c()}function c(){i.price=0;for(var a=0;a<i.formData.cars.length;a++){var b=i.formData.cars[a];0===b.day_or_night&&(i.price+=200),b.owned===!1&&(i.price+=0===b.wheel_type?3500:7e3),b.hours&&(i.price+=b.hours>=12?300*(b.hours-12)+1500:300*b.hours)}("Karen"===i.neighborhood||"Runda"===i.neighborhood||"Eastlands"===i.neighborhood)&&(i.price+=250),d()}function d(){i.time=0;for(var a=0;a<i.formData.cars.length;a++)i.formData.cars[a].hours&&(i.time+=+i.formData.cars[a].hours)}function e(a){if(0===a&&i.drivers>0)i.drivers--;else{if(1!==a)return;i.drivers++}}function f(){var a=i.formData.cars.length;!function(a){for(var b=0;b<i.drivers-a;b++)i.formData.cars.push({wheel_type:0,owned:!0,chosenWheelVm:!1,ownedVm:!0,drivingTimeVm:!0})}(a),i.drivers&&(i.ifCars=!0)}function g(a){i.formData.cars.splice(a,1),i.drivers=i.formData.cars.length,0===i.drivers&&(i.ifCars=!1),c()}function h(a,b,d){var e=i.formData.cars[a];switch(b){case"wheel":e.chosenWheelVm=1===d?!0:!1,e.wheel_type=d;break;case"ownership":e.ownedVm=d===!0?!0:!1,e.owned=d;break;case"time":e.drivingTimeVm=1===d?!0:!1,e.day_or_night=d}c()}var i=this;i.drivers=0,i.price=0,i.time=0,i.neighborhood="Neighborhood",i.hoods=a.list,i.ifCars=!1,i.addCars=f,i.removeCar=g,i.changeDriverQty=e,i.formData={cars:[]},i.setType=h,i.applyTransportFee=b}]),angular.module("homey").controller("SecurityController",["Neighborhoods",function(a){function b(a){i.neighborhood=a,c()}function c(){i.price=0;for(var a=0;a<i.formData.guards.length;a++){var b=i.formData.guards[a];0===b.type?(i.price+=1500,b.hours&&(i.price+=1500*(Math.ceil(b.hours/12)-1))):(i.price+=3e3,b.hours&&(i.price+=3e3*(Math.ceil(b.hours/12)-1)))}("Karen"===i.neighborhood||"Runda"===i.neighborhood||"Eastlands"===i.neighborhood)&&(i.price+=250),d()}function d(){i.time=0;for(var a=0;a<i.formData.guards.length;a++)i.formData.guards[a].hours&&(i.time+=+i.formData.guards[a].hours)}function e(a){if(0===a&&i.guards>0)i.guards--;else{if(1!==a)return;i.guards++}}function f(){var a=i.formData.guards.length;!function(a){for(var b=0;b<i.guards-a;b++)i.formData.guards.push({type:0,typeVm:!1})}(a),i.guards&&(i.ifGuards=!0)}function g(a){i.formData.guards.splice(a,1),i.guards=i.formData.guards.length,0===i.guards&&(i.ifGuards=!1),c()}function h(a,b,d){var e=i.formData.guards[a];switch(b){case"guard":e.typeVm=1===d?!0:!1,e.type=d}c()}var i=this;i.guards=0,i.price=0,i.time=0,i.neighborhood="Neighborhood",i.hoods=a.list,i.ifGuards=!1,i.addGuards=f,i.removeGuard=g,i.changeGuardQty=e,i.formData={guards:[]},i.setType=h,i.applyTransportFee=b}]),angular.module("homey").controller("GardeningController",["Neighborhoods",function(a){function b(a){f.neighborhood=a,d()}function c(a){if(0===a&&f.acres>0)f.acres+=.5;else{if(1!==a)return;f.acres+=.5}d()}function d(){f.price=0,f.price+=750*f.acres,("Karen"===f.neighborhood||"Runda"===f.neighborhood||"Eastlands"===f.neighborhood)&&(f.price+=250),f.price=f.price.toFixed(2),e()}function e(){f.time=(4*f.acres).toFixed(1)}var f=this;f.acres=0,f.price=0,f.time=0,f.neighborhood="Neighborhood",f.hoods=a.list,f.changeAcres=c,f.applyTransportFee=b}]),angular.module("homey").factory("ajaxFactory",["$http","$q",function(a,b){return{request:function(c,d,e){var f=b.defer();switch(d){case"get":!function(){a.get(c).success(function(a){f.resolve(a)}).error(function(a){f.reject(a.error)})}();break;case"post":!function(){a.post(c,e).success(function(a){f.resolve(a)}).error(function(a){f.reject(a.error)})}();break;case"put":!function(){a.put(c,e).success(function(a){f.resolve(a)}).error(function(a){f.reject(a.error)})}();break;case"delete":!function(){a["delete"](c).success(function(a){f.resolve(a)}).error(function(a){f.reject(a.error)})}()}return f.promise}}}]),angular.module("homey").factory("AuthInterceptor",["$q","$injector",function(a,b){return{request:function(c){var d=b.get("AuthToken"),e=d.get();
return c.headers=c.headers||{},e&&(c.headers.Authorization="Bearer "+e),c||a.when(c)}}}]),angular.module("homey").factory("Middleware",["$state","adminService","userService","spService",function(a,b,c,d){return{redirectToForbidden:function(e){switch(e){case"admin":if(void 0===b.admin)return a.go("forbidden");break;case"user":if(void 0===c.user)return a.go("forbidden");break;case"sp":if(void 0===d.sp)return a.go("forbidden")}}}}]),angular.module("homey").factory("AuthFactory",["$localStorage",function(a){var b={isLogged:!1,check:function(){a.token&&(a.userId||a.spId||a.adminId)?this.isLogged=!0:(this.isLogged=!1,a.userId&&delete a.userId,a.spId&&delete a.spId,a.adminId&&delete a.adminId,delete a.token)}};return b}]),angular.module("homey").factory("fbFactory",["userLoginFactory","$state",function(a,b){return{initialize:function(){window.fbAsyncInit=function(){FB.init({appId:"836908086372942",xfbml:!0,version:"v2.2"})},function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//connect.facebook.net/en_US/sdk.js",e.parentNode.insertBefore(d,e))}(document,"script","facebook-jssdk")},fbLogin:function(){FB.login(function(c){"connected"===c.status?FB.api("/me",function(c){a.fbLogin(c).then(function(){b.go("userDashboard")},function(a){console.log(a)})}):console.log("not_authorized"===c.status?"Please log in locally.":"Yo, log in brotha.")},{scope:"public_profile,email"})}}}]),angular.module("homey").factory("userLoginFactory",["$http","$q","$localStorage","$state","AuthToken","AuthFactory","userService",function(a,b,c,d,e,f,g){return{register:function(c){var d=b.defer();return a.post("https://homey-api.herokuapp.com/api/users/register",c).success(function(a){e.set(a),f.isLogged=!0,d.resolve(a)}).error(function(a){d.reject(a.error)}),d.promise},login:function(c){var d=b.defer();return a.post("https://homey-api.herokuapp.com/api/users/login",{email:c.email,password:c.password}).success(function(a){e.set(a),f.isLogged=!0,d.resolve(a)}).error(function(a){d.reject(a.error)}),d.promise},logout:function(){delete c.token,delete c.userId,f.isLogged=!1,FB.logout(),delete g.user,d.go("landing")},fbLogin:function(c){var d=b.defer();return a.post("https://homey-api.herokuapp.com/api/users/fb",c).success(function(a){e.set(a),f.isLogged=!0,d.resolve(a)}).error(function(a){console.log(a.error),d.reject(a.error)}),d.promise}}}]).factory("spLoginFactory",["$http","$q","$localStorage","$state","AuthToken","AuthFactory","spService",function(a,b,c,d,e,f,g){return{register:function(c){var d=b.defer();return a.post("https://homey-api.herokuapp.com/api/serviceProviders/register",c).success(function(a){e.set(a),f.isLogged=!0,d.resolve(a)}).error(function(a){d.reject(a.error)}),d.promise},login:function(c){var d=b.defer();return a.post("https://homey-api.herokuapp.com/api/serviceProviders/login",{email:c.email,password:c.password}).success(function(a){e.set(a),f.isLogged=!0,d.resolve(a)}).error(function(a){d.reject(a.error)}),d.promise},logout:function(){delete c.token,delete c.spId,f.isLogged=!1,delete g.sp,d.go("landing")}}}]).factory("adminLoginFactory",["$http","$q","$localStorage","$state","AuthToken","AuthFactory","adminService",function(a,b,c,d,e,f,g){return{register:function(c){var d=b.defer();return a.post("https://homey-api.herokuapp.com/api/admins/register",c).success(function(a){e.set(a),f.isLogged=!0,d.resolve(a)}).error(function(a){d.reject(a.error)}),d.promise},login:function(c){var d=b.defer();return a.post("https://homey-api.herokuapp.com/api/admins/login",{email:c.email,password:c.password}).success(function(a){e.set(a),f.isLogged=!0,d.resolve(a)}).error(function(a){d.reject(a.error)}),d.promise},logout:function(){delete c.token,delete c.adminId,f.isLogged=!1,delete g.admin,d.go("landing")}}}]),angular.module("homey").factory("userFactory",["$http","$q","$localStorage","userService",function(a,b,c,d){return{saveUserToService:function(c){var e=b.defer();return a.get("https://homey-api.herokuapp.com/api/users/"+c).success(function(a){d.user=a,d.user.birthday=new Date(a.birthday),e.resolve(a)}).error(function(a){e.reject(a)}),e.promise},deleteUser:function(d){var e=b.defer();return a["delete"]("https://homey-api.herokuapp.com/api/users/"+d+"/delete").success(function(a){delete c.token,delete c.userId,e.resolve(a)}).error(function(a){e.reject(a)}),e.promise},edit:function(c){{var e=b.defer();c.id}return a.put("https://homey-api.herokuapp.com/api/users/edit",{email:c.email,first_name:c.first_name,last_name:c.last_name,gender:c.gender,age:c.age,phone:c.phone}).success(function(a){d.user=a,e.resolve(a.user)}).error(function(a){e.reject(a.error)}),e.promise}}}]),angular.module("homey").factory("apptFactory",["$localStorage","ajaxFactory","apptService",function(a,b,c){function d(a){var d="https://homey-api.herokuapp.com/api/users/"+a+"/appointments";return c.appointments=b.request(d,"get")}function e(c){var e="https://homey-api.herokuapp.com/api/users/"+c+"/appointments";b.request(e,"post").then(function(){d(a.userId)},function(a){console.log(a)})}function f(c){var e="https://homey-api.herokuapp.com/api/appointments/"+c+"/pay";b.request(e,"put").then(function(){d(a.userId)},function(a){console.log(a)})}function g(c){var e="https://homey-api.herokuapp.com/api/appointments/"+c+"/complete";b.request(e,"put").then(function(){d(a.userId)},function(a){console.log(a)})}function h(c){var e="https://homey-api.herokuapp.com/api/appointments/"+c+"/cancel";b.request(e,"put").then(function(){d(a.userId)},function(a){console.log(a)})}return{saveApptsToService:d,book:e,pay:f,complete:g,cancel:h}}]).factory("adApptFactory",["ajaxFactory","adApptService",function(a,b){function c(){var c="https://homey-api.herokuapp.com/api/users/"+userId+"/appointments";return b.upcoming=a.request(c,"get")}function d(){var c="https://homey-api.herokuapp.com/api/users/"+userId+"/appointments";return b.past=a.request(c,"get")}function e(){var c="https://homey-api.herokuapp.com/api/users/"+userId+"/appointments";return b.unassigned=a.request(c,"get")}return{saveUpcomingToService:c,savePastToService:d,saveUnassignedToService:e}}]).factory("spApptFactory",["ajaxFactory","spApptService",function(a){function b(){console.log("IN HERE saveUpcomingToService");var b="https://homey-api.herokuapp.com/api/users/"+userId+"/appointments";return a.request(b,"get")}function c(){console.log("IN HERE savePastToService");var b="https://homey-api.herokuapp.com/api/users/"+userId+"/appointments";return a.request(b,"get")}return{saveUpcomingToService:b,savePastToService:c}}]),angular.module("homey").factory("bookingFactory",["$http","$localStorage","$state","ajaxFactory","apptFactory",function(a,b,c,d,e){function f(a,f){var g="https://homey-api.herokuapp.com/api/appointments/bookings/"+f;d.request(g,"post",a).then(function(){e.saveApptsToService(b.userId).then(function(){c.go("appointments")},function(a){console.log(a)})},function(a){console.log(a)})}return{create:f}}]),angular.module("homey").factory("spFactory",["$http","$q","$localStorage","spService",function(a,b,c,d){return{saveSPToService:function(c){var e=b.defer();return a.get("https://homey-api.herokuapp.com/api/serviceProviders/"+c).success(function(a){d.sp=a,d.sp.birthday=new Date(a.birthday),e.resolve(a)}).error(function(a){e.reject(a)}),e.promise},saveProvidersToService:function(){var c=b.defer();return a.get("https://homey-api.herokuapp.com/api/serviceProviders").success(function(a){d.providers=a,c.resolve(a)}).error(function(a){c.reject(a)}),c.promise},"delete":function(d){var e=b.defer();return a["delete"]("https://homey-api.herokuapp.com/api/serviceProviders/"+d+"/delete").success(function(a){delete c.token,delete c.spId,e.resolve(a)}).error(function(a){e.reject(a)}),e.promise},edit:function(c){{var e=b.defer();c.id}return a.put("https://homey-api.herokuapp.com/api/serviceProviders/"+c.id+"/edit",{email:c.email,first_name:c.first_name,last_name:c.last_name,gender:c.gender,age:c.age,phone:c.phone,birthday:c.birthday,address:c.address,service:c.service,years_experience:c.years_experience}).success(function(a){d.sp=a,e.resolve(a.sp)}).error(function(a){e.reject(a.error)}),e.promise}}}]),angular.module("homey").factory("adminFactory",["$http","$q","$localStorage","$state","adminService","adApptFactory",function(a,b,c,d,e){return{saveAdminToService:function(c){var d=b.defer();return a.get("https://homey-api.herokuapp.com/api/admins/"+c).success(function(a){e.admin=a,e.admin.birthday=new Date(a.birthday),d.resolve(a)}).error(function(a){d.reject(a)}),d.promise},"delete":function(d){var e=b.defer();return a["delete"]("https://homey-api.herokuapp.com/api/admins/"+d+"/delete").success(function(a){delete c.token,delete c.adminId,e.resolve(a)}).error(function(a){e.reject(a)}),e.promise},edit:function(c){{var d=b.defer();c.id}return a.put("https://homey-api.herokuapp.com/api/admins/"+c.id+"/edit",{email:c.email,first_name:c.first_name,last_name:c.last_name,gender:c.gender,birthday:c.birthday,phone:c.phone}).success(function(a){e.admin=a,d.resolve(a)}).error(function(a){d.reject(a.error)}),d.promise},assign:function(c,d){var e=b.defer();return a.post("https://homey-api.herokuapp.com/api/assignments",{appointment_id:c.id,service_provider_id:d.id}).success(function(a){e.resolve(a)}).error(function(a){e.reject(a.error)}),e.promise}}}]),angular.module("homey").factory("discountFactory",["ajaxFactory","$state",function(a,b){function c(c){var d="https://homey-api.herokuapp.com/api/admins/"+c.admin_id+"/discounts";a.request(d,"post",c).then(function(){b.go("adminDashboard")},function(a){console.log(a)})}return{generateDiscountCode:c}}]),angular.module("homey").factory("addressFactory",["$localStorage","$state","ajaxFactory","addressService",function(a,b,c,d){function e(d){var e="https://homey-api.herokuapp.com/api/addresses";c.request(e,"post",d).then(function(){h(a.userId).then(function(){b.reload()},function(a){console.log(a)})},function(a){console.log(a)})}function f(d,e){var f="https://homey-api.herokuapp.com/api/addresses/"+d+"/edit";c.request(f,"put",e).then(function(){h(a.userId).then(function(){b.reload()},function(a){console.log(a)})},function(a){console.log(a)})}function g(d){var e="https://homey-api.herokuapp.com/api/addresses/"+d+"/delete";c.request(e,"delete").then(function(){h(a.userId).then(function(){b.reload()},function(a){console.log(a)})},function(a){console.log(a)})}function h(a){var b="https://homey-api.herokuapp.com/api/users/"+a+"/addresses";return d.addresses=c.request(b,"get")}return{create:e,saveAddressesToService:h,edit:f,destroy:g}}]),angular.module("homey").factory("stripeFactory",["ajaxFactory",function(a){function b(b){var c="https://homey-api.herokuapp.com/api/charges/stripe";a.request(c,"post",{stripeToken:b}).then(function(a){console.log(a)},function(a){console.log(a)})}return{chargeCustomer:b}}]),angular.module("homey").factory("MailerFactory",["$http","$q",function(a,b){function c(c){var d=b.defer(),e="https://homey-api.herokuapp.com/api/mailer/contact";return a.post(e,c).success(function(a){d.resolve(a)}).error(function(a){d.reject(a)}),d.promise}return{sendContact:c}}]),angular.module("homey").factory("AuthToken",["$localStorage",function(a){return{set:function(b){a.token=b.token,b.userId?a.userId=b.userId:b.spId?a.spId=b.spId:b.adminId&&(a.adminId=b.adminId)},get:function(){return a.token}}}]),angular.module("homey").factory("userService",[function(){return{}}]),angular.module("homey").factory("apptService",[function(){return{}}]).factory("adApptService",[function(){return{}}]).factory("spApptService",[function(){return{}}]),angular.module("homey").factory("spService",[function(){return{}}]),angular.module("homey").factory("adminService",[function(){return{}}]),angular.module("homey").factory("addressService",[function(){return{}}]),angular.module("homey").factory("Neighborhoods",[function(){return{list:[{id:0,name:"Kilimani"},{id:1,name:"Lavington"},{id:2,name:"Westlands"},{id:3,name:"CBD"},{id:4,name:"Upperhill"},{id:5,name:"Karen"},{id:6,name:"Runda"},{id:7,name:"Eastlands"}]}}]),angular.module("homey").filter("upcomingFilter",[function(){return function(a){var b=[],c=Date.now();if(a&&a.length>0)for(var d=0;d<a.length;d++){var e=new Date(a[d].service_date);e>=c&&b.push(a[d])}return b}}]).filter("pastFilter",[function(){return function(a){var b=[],c=Date.now();if(a&&a.length>0)for(var d=0;d<a.length;d++){var e=new Date(a[d].service_date);c>=e&&b.push(a[d])}return b}}]),angular.module("homey").directive("navbar",[function(){return{restrict:"E",templateUrl:"views/navbar.html"}}]),angular.module("homey").directive("naviFooter",[function(){return{restrict:"E",templateUrl:"views/footer.html"}}]);